---
title: "Models in bbsBayes2"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Models in bbsBayes2}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  # For pre-compiling and pkgdown (relative to pkg home)
  fig.path = "vignettes/articles/figures/models_",
  dpi = 150

)
```

```{r setup, message = FALSE}
library(bbsBayes2)
```

There are 9 types of models that can be run with bbsBayes2. For a quick overview
you can access the `bbs_models` data frame.

```{r}
bbs_models
```


For specifics on *how* to run the various models, see the articles on 
[model runs](./index.html#model-runs).

See the following for details regarding the *why* of these various models. 
As well as the final section on Advanced Modelling techniques. All models can be hierarchical, non-hierarchical, or spatial. Hierarchical models share information on species abundance and trend over time, so that each time periods' estimates are pulled closer to the mean for that species across time. Non-hierarchical models have no sharing of information, and consider time periods and spatial strata as independent. Spatial models are both hierarchical and spatial, sharing information over time and space. This means that each stratum's estimates will be pulled closer to the mean of each its neighbors and to the species mean across time.

## 1. First Difference Models

A first-difference model considers the time-series as a random-walk from the first year, so that the first-differences of the sequence of year-effects are random effects with mean = 0 and an estimated variance. This model has been described in Link et al. 2017 https://doi.org/10.1650/CONDOR-17-1.1


## 2. Generalized Additive Models
The GAM models the time series as a semiparametric smooth using a Generalized Additive Model (GAM) structure. See Smith & Edwards, 2021 https://doi.org/10.1093/ornithapp/duaa065. 

## 3. Generalized Additive Models with Year Effect
The GAMYE includes the semiparametric smooth used in the gam option, but also includes random year-effect terms that track annual fluctuations around the smooth. This is the model that the Canadian Wildlife Service is now using for the annual status and trend estimates. See pre-print at Smith et al., 2023 https://doi.org/10.32942/X2088D.

## 4. Slope
The slope option estimates the time series as a log-linear regression with random year-effect terms that allow the trajectory to depart from the smooth regression line. It is the model used by the USGS and CWS to estimate BBS trends between 2011 and 2018. The basic model was first described in 2002 (Link and Sauer 2002; https://doi.org/10.1890/0012-9658(2002)083[2832:AHAOPC]2.0.CO;2) and its application to the annual status and trend estimates is documented in Sauer and Link (2011; https://doi.org/10.1525/auk.2010.09220) and Smith et al. (2014; https://doi.org/10.22621/cfn.v128i2.1565).


## Error distributions

## Spatial vs Hierarchical vs Non-hierarchical models

